from .. import loader, utils 
from telethon import events 
from telethon.errors.rpcerrorlist import YouBlockedUserError 
from asyncio.exceptions import TimeoutError 
 
def register(cb):
    cb(spambanMOD())

class spambanMod(loader.Module): 
    """–ú–æ–¥—É–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ —Å–ø–∞–º–±–∞–Ω""" 
    strings = {'name': 'Spamban_check'} 
 
    async def spmcmd(self, message):
        """"–ò—Å–ø–æ–ª—å–∑—É–π .spm"""
        chat = "@spambot"
        await message.edit("<b>üòé –ü—Ä–æ–≤–µ—Ä—è—é –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ —Å–ø–∞–º–±–∞–Ω...</b>")
        async with message.client.conversation(chat) as conv: 
            try:
                response = conv.wait_event(events.NewMessage(incoming=True, from_users=178220800))
                await message.client.send_message(chat, "/start") 
                response = await response
            except YouBlockedUserError:
                await message.edit("<b>üò∂‚Äçüå´Ô∏è –†–∞–∑–±–ª–æ–∫–∏—Ä—É–π @spambot</b>")
                return
            await message.delete() 
            await message.client.send_message(message.to_id, response.text) 
